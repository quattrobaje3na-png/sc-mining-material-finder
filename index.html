<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Citizen Starter Guide - Mining Intel</title>
    <style>
        body { background:#000; color:#FFB300; font-family: monospace; padding:15px; line-height: 1.4; }
        .header { border-bottom:1px solid #332200; margin-bottom:20px; padding-bottom:10px; }
        select, button { 
            background:#111; color:#FFB300; border:1px solid #FFB300; 
            padding:12px; margin-bottom:10px; width:100%; font-size: 16px;
            border-radius:0; -webkit-appearance:none;
        }
        button { font-weight:bold; cursor:pointer; text-transform:uppercase; background:#1a1a1a; transition: 0.2s; }
        button:hover { background:#FFB300; color:#000; }
        .card { border:1px solid #332200; border-left:4px solid #FFB300; padding:12px; margin-bottom:10px; background:#050505; }
        .row { display: flex; justify-content: space-between; font-size: 14px; margin-top:5px; border-top: 1px solid #222; padding-top:5px; }
        label { font-size: 10px; text-transform: uppercase; color: #665500; display: block; margin-bottom: 2px; letter-spacing: 1px; }
        
        /* DATA STATUS BADGE STYLES */
        #data-source-badge { 
            display: inline-block; padding: 2px 8px; font-size: 10px; font-weight: bold; 
            border-radius: 3px; background: #333; color: #888; margin-bottom: 5px;
        }
        .status-live { background: #004400 !important; color: #00FF00 !important; border: 1px solid #00FF00; }
        .status-local { background: #442200 !important; color: #FFB300 !important; border: 1px solid #FFB300; }
        
        #status-text { font-size:12px; color:#666; }
        .loc-title { color: #fff; font-size: 15px; display: block; margin-bottom: 5px; }
    </style>
</head>
<body>
    <div class="header">
        <div id="data-source-badge">SYNCING...</div>
        <h3>> INTEL_v35.0_LIVE_VERIFIED</h3>
        <p id="status-text">INITIALIZING QUANTUM LINK...</p>
    </div>

    <label>Region_Selection</label>
    <select id="sys-select">
        <option value="Stanton">STANTON_SYSTEM</option>
        <option value="Pyro">PYRO_SYSTEM</option>
        <option value="Nyx">NYX_SYSTEM</option>
    </select>

    <label>Priority_Resource_01</label>
    <select class="ore-sel">
        <option value="">- SELECT MATERIAL -</option>
        <option value="Quantainium">QUANTAINIUM</option>
        <option value="Stileron">STILERON</option>
        <option value="Savrilium">SAVRILIUM</option>
        <option value="Riccite">RICCITE</option>
        <option value="Taranite">TARANITE</option>
        <option value="Lindinium">LINDINIUM</option>
        <option value="Bexalite">BEXALITE</option>
        <option value="Gold">GOLD</option>
        <option value="Laranite">LARANITE</option>
        <option value="Borase">BORASE</option>
        <option value="Beryl">BERYL</option>
        <option value="Agricium">AGRICIUM</option>
        <option value="Hephaestanite">HEPHAESTANITE</option>
        <option value="Tungsten">TUNGSTEN</option>
        <option value="Titanium">TITANIUM</option>
        <option value="Silicon">SILICON</option>
        <option value="Iron">IRON</option>
        <option value="Quartz">QUARTZ</option>
        <option value="Torite">TORITE</option>
        <option value="Corundum">CORUNDUM</option>
        <option value="Copper">COPPER</option>
        <option value="Tin">TIN</option>
        <option value="Aluminum">ALUMINUM</option>
        <option value="Ice">ICE</option>
    </select>
    
    <button onclick="scan()">Initiate Triple Scan</button>
    <div id="results"></div>

    <script>
        let oreData, sysGroups, refMapping, filterList;
        const statusBadge = document.getElementById('data-source-badge');
        const statusText = document.getElementById('status-text');
        
        const BASE_URL = 'https://raw.githubusercontent.com/quattrobaje3na-png/sc-mining-tool/main/';
        const REGOLITH_URL = 'https://regolith.rocks/api/export/survey/locations';

        async function init() {
            try {
                // 1. Load Local Configs
                const configs = await Promise.all([
                    fetch(BASE_URL + 'system_sorting.json', {cache: "no-store"}).then(r => r.json()),
                    fetch(BASE_URL + 'reference.json', {cache: "no-store"}).then(r => r.json()),
                    fetch(BASE_URL + 'filter.json', {cache: "no-store"}).then(r => r.json())
                ]);
                [sysGroups, refMapping, filterList] = configs;

                // 2. Attempt Regolith Live Sync
                try {
                    const res = await fetch(REGOLITH_URL, {cache: "no-store"});
                    if (!res.ok) throw new Error("API Offline");
                    oreData = await res.json();
                    
                    // UPDATE UI TO LIVE
                    statusBadge.innerText = "DATA SOURCE: LIVE (REGOLITH)";
                    statusBadge.className = "status-live";
                    statusText.innerText = "SUCCESS: STREAMING REAL-TIME INTEL";
                } catch (apiErr) {
                    // FALLBACK TO GITHUB
                    const fallback = await fetch(BASE_URL + 'ore_locations.json', {cache: "no-store"});
                    oreData = await fallback.json();
                    
                    // UPDATE UI TO LOCAL
                    statusBadge.innerText = "DATA SOURCE: FALLBACK (GITHUB)";
                    statusBadge.className = "status-local";
                    statusText.innerText = "NOTICE: USING OFFLINE DATABASE BACKUP";
                }
            } catch (err) {
                statusBadge.innerText = "DATA SOURCE: ERROR";
                statusText.innerText = "CRITICAL: DATABASE SYNC FAILURE";
            }
        }

        // ... scan() logic remains the same ...

        init();
    </script>
</body>
</html>
