<!DOCTYPE html>
<html>
<head>
    <style>
        body { background:#000; color:#FFB300; font-family: 'Courier New', monospace; margin:0; padding:20px; }
        .terminal { border:1px solid #FFB300; padding:20px; box-shadow: 0 0 15px rgba(255, 179, 0, 0.2); }
        select, button { background:#000; color:#FFB300; border:1px solid #FFB300; padding:10px; margin-bottom:10px; width:100%; font-family:inherit; }
        button:hover { background:#FFB300; color:#000; cursor:pointer; }
        .result-card { border:1px solid #332200; border-left:4px solid #FFB300; padding:10px; margin-top:10px; background:#050505; }
    </style>
</head>
<body>
    <div class="terminal">
        <h3>> SECTOR_ANALYSIS_v18.0</h3>
        <p id="status">[LINK: ESTABLISHING...]</p>

        <select id="sys-select">
            <option value="STANTON">STANTON_SYSTEM</option>
            <option value="PYRO">PYRO_SYSTEM</option>
        </select>

        <select class="mat-select"><option value="">- SELECT_ORE_01 -</option></select>
        <select class="mat-select"><option value="">- SELECT_ORE_02 -</option></select>
        <select class="mat-select"><option value="">- SELECT_ORE_03 -</option></select>

        <button onclick="runScan()">EXECUTE_SCAN</button>
        <div id="results"></div>
    </div>

    <script>
        let oreData = null;
        const status = document.getElementById('status');

        // This works because the JSON is on the same domain as the HTML
        fetch('OreLocations.json')
            .then(response => response.json())
            .then(data => {
                oreData = data;
                status.innerText = "[LINK: ONLINE // GITHUB_SYNC_SUCCESS]";
                populateMenus();
            })
            .catch(err => {
                status.innerText = "[LINK: ERROR // CHECK_JSON_FILE]";
                status.style.color = "#FF0000";
            });

        function populateMenus() {
            const materials = new Set();
            for (let loc in oreData) {
                if (oreData[loc].ores) {
                    Object.keys(oreData[loc].ores).forEach(m => materials.add(m));
                }
            }
            const selects = document.querySelectorAll('.mat-select');
            materials.forEach(m => {
                selects.forEach(s => {
                    let opt = document.createElement('option');
                    opt.value = m; opt.innerText = m;
                    s.appendChild(opt);
                });
            });
        }

        function runScan() {
            const out = document.getElementById('results');
            const system = document.getElementById('sys-select').value;
            const picks = Array.from(document.querySelectorAll('.mat-select')).map(s => s.value).filter(v => v);
            out.innerHTML = "";

            for (let loc in oreData) {
                let weight = 0;
                picks.forEach(ore => {
                    if (oreData[loc].ores && oreData[loc].ores[ore]) {
                        weight += oreData[loc].ores[ore].prob;
                    }
                });

                if (weight > 0) {
                    const div = document.createElement('div');
                    div.className = "result-card";
                    div.innerHTML = `<b>${loc}</b><br><small>WEIGHT: ${(weight*100).toFixed(0)}</small>`;
                    out.appendChild(div);
                }
            }
        }
    </script>
</body>
</html>