<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Citizen Starter Guide - Mining Intel</title>
    <style>
        body { background:#000; color:#FFB300; font-family: monospace; padding:15px; }
        .header { border-bottom:1px solid #332200; margin-bottom:20px; }
        .status-pill { display: inline-block; padding: 2px 8px; font-size: 10px; border-radius: 3px; font-weight: bold; margin-bottom: 10px; }
        .live { background: #004400; color: #00FF00; border: 1px solid #00FF00; }
        .backup { background: #442200; color: #FFB300; border: 1px solid #FFB300; }
        
        label { font-size: 10px; color: #665500; display: block; margin-top: 10px; }
        select, button { 
            background:#111; color:#FFB300; border:1px solid #FFB300; 
            padding:12px; margin-bottom:10px; width:100%; font-size: 16px; border-radius: 0;
        }
        button { background: #1a1a1a; cursor: pointer; text-transform: uppercase; font-weight: bold; }
        button:hover { background: #FFB300; color: #000; }

        .card { border: 1px solid #332200; border-left: 4px solid #FFB300; padding: 12px; margin-bottom: 10px; background: #050505; }
        .loc-title { color: #fff; font-size: 16px; font-weight: bold; display: block; }
        .sig-bar { font-size: 10px; color: #888; margin-bottom: 8px; border-bottom: 1px solid #222; padding-bottom: 4px; text-transform: uppercase; }
        .row { display: flex; justify-content: space-between; font-size: 14px; padding: 3px 0; }
        .prob { color: #00FF00; font-weight: bold; }
    </style>
</head>
<body>
    <div class="header">
        <div id="data-status" class="status-pill backup">INTEL_OFFLINE</div>
        <h2 style="margin:0;">> MINING_INTEL_v47.2</h2>
    </div>

    <label>Target_Star_System</label>
    <select id="sys-select">
        <option value="ALL">ALL_KNOWN_SYSTEMS</option>
        <option value="Stanton">STANTON</option>
        <option value="Pyro">PYRO</option>
        <option value="Nyx">NYX</option>
    </select>

    <label>Priority_Material_01</label>
    <select class="ore-sel"></select>
    <label>Priority_Material_02</label>
    <select class="ore-sel"></select>
    <label>Priority_Material_03</label>
    <select class="ore-sel"></select>

    <button onclick="scan()">Initiate Deep Scan</button>
    <div id="results"></div>

    <script>
        let oreData, rockData, filterData, sortingData;
        const BASE_URL = 'https://raw.githubusercontent.com/quattrobaje3na-png/sc-mining-tool/main/';

        async function fetchWithFallback(liveFile, masterFile) {
            try {
                const res = await fetch(BASE_URL + liveFile, { cache: "no-store" });
                if (!res.ok) throw new Error();
                const data = await res.json();
                return { data, isLive: true };
            } catch (e) {
                const res = await fetch(BASE_URL + masterFile);
                const data = await res.json();
                return { data, isLive: false };
            }
        }

        async function init() {
            const status = document.getElementById('data-status');
            try {
                const [fRes, sRes] = await Promise.all([
                    fetch(BASE_URL + 'filter.json'),
                    fetch(BASE_URL + 'system_sorting.json')
                ]);
                filterData = await fRes.json();
                sortingData = await sRes.json();

                const materials = filterData.materials || [];
                document.querySelectorAll('.ore-sel').forEach(s => {
                    s.innerHTML = '<option value="">- SELECT MATERIAL -</option>' + 
                        materials.sort().map(m => `<option value="${m}">${m.toUpperCase()}</option>`).join('');
                });

                const oreRes = await fetchWithFallback('ore_locations_live.json', 'ore_locations.json');
                const rockRes = await fetchWithFallback('rock_live.json', 'rock.json');
                
                oreData = oreRes.data;
                rockData = rockRes.data;

                status.className = oreRes.isLive ? "status-pill live" : "status-pill backup";
                status.innerText = oreRes.isLive ? "DB: LIVE_DATA_ACTIVE" :
